<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v7.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div><script>

    // set the dimensions and margins of the graph
    var width = 450
    height = 450
    margin = 40
    var svg = d3.select("#my_dataviz")
        .append("svg")
        .attr("width", width)
        .attr("height", height)

    // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
    var radius = Math.min(width, height) / 2 - margin

    // append the svg object to the div called 'my_dataviz'
    var data = {a:2, b:4, c:8, d:10};

    var
        g = svg.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    var color = d3.scaleOrdinal(['#4daf4a','#377eb8','#ff7f00','#984ea3','#e41a1c']);

    // Generate the pie
    var pie = d3.pie()
        .value(function(d) {
            return d[1] });

    // Utiliser Object.entries() pour obtenir un tableau des paires cl√©-valeur
    var data_ready = pie(Object.entries(data));

    // Generate the arcs
    var arc = d3.arc()
        .innerRadius(100)
        .padAngle(.05)
        .outerRadius(radius);

    //Generate groups
    var arcs = g.selectAll("arc")
        .data(data_ready)
        .enter();

    //Draw arc paths
    arcs.append("path")
        .attr("fill", function(d, i) {
            return color(i);
        })
        .attr("d", arc);

    arcs
        .append('text')
        .text(function(d){return d.value})
        .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")";  })
        .style("text-anchor", "middle")
        .style("font-size", "1.5em");
    //legende

</script>